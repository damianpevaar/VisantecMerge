<h2 mat-dialog-title>Cambiar contraseña</h2>

<form
  id="changePasswordForm"
  [formGroup]="form"
  (ngSubmit)="submit()"
  mat-dialog-content
  class="change-password-form">
  <p class="dialog-helper">
    Ingresa tu contraseña actual y define una nueva contraseña segura.
  </p>

  <mat-form-field appearance="outline">
    <mat-label>Contraseña actual</mat-label>
    <input matInput type="password" formControlName="currentPassword" autocomplete="current-password">
    <mat-error *ngIf="form.controls.currentPassword.hasError('required')">
      La contraseña actual es obligatoria.
    </mat-error>
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Nueva contraseña</mat-label>
    <input matInput type="password" formControlName="newPassword" autocomplete="new-password">
    <mat-hint>Mínimo 8 caracteres</mat-hint>
    <mat-error *ngIf="form.controls.newPassword.hasError('required')">
      La nueva contraseña es obligatoria.
    </mat-error>
    <mat-error *ngIf="form.controls.newPassword.hasError('minlength')">
      Debe tener al menos 8 caracteres.
    </mat-error>
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Confirmar nueva contraseña</mat-label>
    <input matInput type="password" formControlName="confirmPassword" autocomplete="new-password">
    <mat-error *ngIf="form.controls.confirmPassword.hasError('required')">
      Confirma la nueva contraseña.
    </mat-error>
    <mat-error *ngIf="form.controls.confirmPassword.hasError('mismatch')">
      Las contraseñas no coinciden.
    </mat-error>
  </mat-form-field>
</form>

<mat-dialog-actions align="end">
  <button mat-button type="button" (click)="cancel()">Cancelar</button>
  <button
    mat-flat-button
    color="primary"
    type="submit"
    form="changePasswordForm"
    [disabled]="form.invalid || isSubmitting">
    Guardar
  </button>
</mat-dialog-actions>
